<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام المحاسبة</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf_viewer.min.css">
</head>
<body>
    <div id="loginScreen" class="login-screen active">
        <div class="login-container">
            <div class="login-box">
                <h2>تسجيل الدخول</h2>
                <form id="loginForm">
                    <input type="text" placeholder="اسم المستخدم" id="username" required>
                    <input type="password" placeholder="كلمة المرور" id="password" required>
                    <button type="submit">دخول</button>
                </form>
            </div>
        </div>
    </div>

    <div id="mainApp" class="main-container hidden">
        <button class="toggle-btn" id="sidebarToggle">
            <i class="fas fa-bars"></i>
        </button>
        <aside class="sidebar">
            <div class="logo">نظام المحاسبة</div>
            <nav>
                <a href="#" data-section="dashboard" class="active"><i class="fas fa-home"></i> لوحة التحكم</a>
                <a href="#" data-section="transactions"><i class="fas fa-money-bill"></i> الحسابات</a>
                <a href="#" data-section="projects"><i class="fas fa-project-diagram"></i> المشاريع</a>
                <a href="#" data-section="users"><i class="fas fa-users"></i> المستخدمين</a>
                <a href="#" data-section="documents"><i class="fas fa-file"></i> المستندات</a>
                <a href="#" data-section="reports"><i class="fas fa-chart-bar"></i> التقارير</a>
                <a href="#" data-section="activities"><i class="fas fa-history"></i> سجل النشاطات</a>
                <a href="#" data-section="settings"><i class="fas fa-cog"></i> الإعدادات</a>
                <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> تسجيل خروج</a>
            </nav>
        </aside>

        <main class="content">
            <div id="dashboard" class="section active">
                <h2>لوحة التحكم</h2>
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <h3>إجمالي الإيرادات</h3>
                        <p id="totalIncome">0 د.ع</p>
                    </div>
                    <div class="stat-card">
                        <h3>إجمالي المصروفات</h3>
                        <p id="totalExpenses">0 د.ع</p>
                    </div>
                    <div class="stat-card">
                        <h3>صافي الربح</h3>
                        <p id="netProfit">0 د.ع</p>
                    </div>
                </div>
                <div class="charts">
                    <canvas id="financialChart"></canvas>
                </div>
            </div>

            <div id="transactions" class="section">
                <h2>الحسابات</h2>
                <div class="transactions-container">
                    <div class="transaction-section">
                        <h3>إدخال العمليات المالية</h3>
                        <div class="transaction-form-container">
                            <form id="transactionForm" class="transaction-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="transDate">التاريخ:</label>
                                        <input type="date" id="transDate" class="form-input" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="transType">نوع العملية:</label>
                                        <select id="transType" class="form-input" required>
                                            <option value="">اختر نوع العملية</option>
                                            <option value="ايراد">ايراد</option>
                                            <option value="مصروف">مصروف</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="transAmount">المبلغ (د.ع):</label>
                                        <input type="number" id="transAmount" class="form-input" placeholder="أدخل المبلغ" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="transProject">المشروع:</label>
                                        <select id="transProject" class="form-input" required>
                                            <option value="">اختر المشروع</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group full-width">
                                    <label for="transDescription">التفاصيل:</label>
                                    <textarea id="transDescription" class="form-input" rows="3" placeholder="أدخل تفاصيل العملية" required></textarea>
                                </div>
                                <div class="form-buttons">
                                    <button type="button" id="saveTransaction" class="btn-primary">حفظ العملية</button>
                                </div>
                            </form>
                        </div>
                    </div>
                        <div id="transactionsFilters" class="transactions-filters">
                            <div class="form-group">
                                <label for="filterProject">المشروع:</label>
                                <select id="filterProject" class="form-input">
                                    <option value="">كل المشاريع</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="filterUser">المستخدم:</label>
                                <select id="filterUser" class="form-input">
                                    <option value="">كل المستخدمين</option>
                                </select>
                            </div>
                        </div>
                        <div class="actions-bar">
                            <div class="view-toggle">
                                <button class="tab-btn active" data-view="cards">
                                    <i class="fas fa-th"></i> عرض البطاقات
                                </button>
                                <button class="tab-btn" data-view="table">
                                    <i class="fas fa-table"></i> عرض الجدول
                                </button>
                            </div>
                            <div class="export-actions">
                                <button class="btn-primary" id="printTransactions">
                                    <i class="fas fa-print"></i> طباعة
                                </button>
                                <button class="btn-primary" id="downloadTransactions">
                                    <i class="fas fa-download"></i> تنزيل PDF
                                </button>
                            </div>
                        </div>
                        <div class="transactions-cards active" id="transactionsCards"></div>
                        <div class="transactions-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>التاريخ</th>
                                        <th>الوصف</th>
                                        <th>النوع</th>
                                        <th>المبلغ</th>
                                        <th>الإجراءات</th>
                                    </tr>
                                </thead>
                                <tbody id="transactionsTableBody">
                                    <!-- سيتم إضافة الصفوف ديناميكياً -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div id="projects" class="section">
                <h2>المشاريع</h2>
                <div class="projects-container">
                    <div class="add-project">
                        <h3>إضافة مشروع جديد</h3>
                        <div class="project-form">
                            <div class="form-group">
                                <label for="projectName">اسم المشروع:</label>
                                <input type="text" id="projectName" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="projectDesc">وصف المشروع:</label>
                                <textarea id="projectDesc" class="form-input" rows="3" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="projectDate">تاريخ البدء:</label>
                                <input type="date" id="projectDate" class="form-input" required>
                            </div>
                            <div class="form-buttons">
                                <button id="saveProject" class="btn-primary">حفظ المشروع</button>
                            </div>
                        </div>
                    </div>
                    <div id="projectsList" class="projects-list"></div>
                </div>
            </div>
            <div id="users" class="section">
                <h2>المستخدمين</h2>
                <div class="users-container">
                    <div class="add-user">
                        <h3>إضافة مستخدم جديد</h3>
                        <div class="user-form">
                            <div class="form-group">
                                <label for="userName">اسم المستخدم:</label>
                                <input type="text" id="userName" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="userRole">الصلاحية:</label>
                                <select id="userRole" class="form-input" required>
                                    <option value="">اختر الصلاحية</option>
                                    <option value="admin">مدير</option>
                                    <option value="user">مستخدم</option>
                                </select>
                            </div>
                            <div class="form-group permissions-group" id="permissionsGroup" style="display: none;">
                                <label>الصلاحيات:</label>
                                <div class="permissions-options">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="viewReports" name="permissions"> عرض التقارير
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="manageUsers" name="permissions"> إدارة المستخدمين
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="manageProjects" name="permissions"> إدارة المشاريع
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="manageTransactions" name="permissions"> إدارة المعاملات
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="userProject">المشروع:</label>
                                <select id="userProject" class="form-input" required>
                                    <option value="">اختر المشروع</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="userPassword">كلمة المرور:</label>
                                <input type="password" id="userPassword" class="form-input" required>
                            </div>
                            <div class="form-buttons">
                                <button id="saveUser" class="btn-primary">حفظ المستخدم</button>
                            </div>
                        </div>
                    </div>
                    <div id="usersList" class="users-list"></div>
                </div>
            </div>
            <div id="documents" class="section">
                <h2>المستندات</h2>
                <div class="documents-tabs">
                    <button class="tab-btn active" data-doctab="public-docs">المستندات العامة</button>
                    <button class="tab-btn" data-doctab="private-docs">المستندات الخاصة</button>
                </div>
                <div class="documents-container" id="public-docs">
                    <div class="add-document">
                        <h3>إضافة مستند جديد</h3>
                        <div class="document-form">
                            <div class="form-group">
                                <label for="documentTitle">عنوان المستند:</label>
                                <input type="text" id="documentTitle" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="documentDesc">وصف المستند:</label>
                                <textarea id="documentDesc" class="form-input" rows="3" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="documentProject">المشروع المرتبط:</label>
                                <select id="documentProject" class="form-input" required>
                                    <option value="">اختر المشروع</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="documentFile">الملف:</label>
                                <input type="file" id="documentFile" class="form-input" required>
                            </div>
                            <div class="form-buttons">
                                <button id="saveDocument" class="btn-primary">حفظ المستند</button>
                            </div>
                        </div>
                    </div>
                    <div id="documentsList" class="documents-list"></div>
                </div>
            </div>
            <div id="reports" class="section">
                <h2>التقارير</h2>
                <div class="reports-container">
                    <div class="reports-tabs">
                        <button class="tab-btn active" data-report="financial">التقارير المالية</button>
                        <button class="tab-btn" data-report="projects">تقارير المشاريع</button>
                        <button class="tab-btn" data-report="users">تقارير المستخدمين</button>
                    </div>
                    <div class="report-content active" id="financial-report">
                        <div class="report-header">
                            <h3>التقرير المالي</h3>
                            <div class="date-filter">
                                <label>من:</label>
                                <input type="date" id="financialStartDate">
                                <label>إلى:</label>
                                <input type="date" id="financialEndDate">
                                <button id="generateFinancialReport" class="btn-primary">عرض التقرير</button>
                            </div>
                        </div>
                        <div class="report-summary">
                            <div class="summary-card">
                                <h4>إجمالي الإيرادات</h4>
                                <p id="reportTotalIncome">0 د.ع</p>
                            </div>
                            <div class="summary-card">
                                <h4>إجمالي المصروفات</h4>
                                <p id="reportTotalExpenses">0 د.ع</p>
                            </div>
                            <div class="summary-card">
                                <h4>صافي الربح</h4>
                                <p id="reportNetProfit">0 د.ع</p>
                            </div>
                        </div>
                        <div class="report-chart">
                            <canvas id="reportFinancialChart"></canvas>
                        </div>
                    </div>
                    <div class="report-content" id="projects-report">
                        <div class="report-header">
                            <h3>تقرير المشاريع</h3>
                            <div class="project-filter">
                                <select id="projectStatusFilter">
                                    <option value="">كل المشاريع</option>
                                    <option value="جديد">جديد</option>
                                    <option value="مكتمل">مكتمل</option>
                                </select>
                                <button id="generateProjectReport" class="btn-primary">عرض التقرير</button>
                            </div>
                        </div>
                        <div class="report-chart">
                            <canvas id="reportProjectsChart"></canvas>
                        </div>
                    </div>
                    <div class="report-content" id="users-report">
                        <div class="report-header">
                            <h3>تقرير المستخدمين</h3>
                        </div>
                        <div class="users-stats">
                            <div class="summary-card">
                                <h4>إجمالي المستخدمين</h4>
                                <p id="totalUsers">0</p>
                            </div>
                            <div class="summary-card">
                                <h4>المستخدمين النشطين</h4>
                                <p id="activeUsers">0</p>
                            </div>
                        </div>
                        <div class="report-chart">
                            <canvas id="reportUsersChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div id="activities" class="section">
                <h2>سجل النشاطات</h2>
                <div class="activities-container">
                    <div class="activities-filters">
                        <select id="activityTypeFilter" class="form-input">
                            <option value="">كل النشاطات</option>
                            <option value="transaction">العمليات المالية</option>
                            <option value="user">المستخدمين</option>
                            <option value="project">المشاريع</option>
                            <option value="document">المستندات</option>
                        </select>
                        <div class="date-filter">
                            <input type="date" id="activityStartDate" class="form-input">
                            <span>إلى</span>
                            <input type="date" id="activityEndDate" class="form-input">
                        </div>
                        <button id="filterActivities" class="btn-primary">تصفية</button>
                    </div>
                    <div id="activitiesList" class="activities-list"></div>
                </div>
            </div>
            <div id="settings" class="section">
                <h2>الإعدادات</h2>
                <div class="settings-container">
                    <div class="settings-section">
                        <h3>معلومات المؤسسة</h3>
                        <div class="form-group">
                            <label>اسم المؤسسة:</label>
                            <input type="text" id="companyName" class="form-input">
                        </div>
                    </div>
                    <div class="settings-section">
                        <h3>تغيير كلمة المرور</h3>
                        <div class="form-group">
                            <label>كلمة المرور الحالية:</label>
                            <input type="password" id="currentPassword" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>كلمة المرور الجديدة:</label>
                            <input type="password" id="newPassword" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>تأكيد كلمة المرور:</label>
                            <input type="password" id="confirmPassword" class="form-input">
                        </div>
                        <button id="changePassword" class="btn-primary">تغيير كلمة المرور</button>
                    </div>
                    <div class="settings-section">
                        <h3>المظهر</h3>
                        <div class="form-group">
                            <label>النمط:</label>
                            <select id="themeSelect" class="form-input">
                                <option value="default">النمط الافتراضي</option>
                                <option value="dark">النمط الداكن</option>
                                <option value="light">النمط الفاتح</option>
                                <option value="blue">النمط الأزرق</option>
                                <option value="green">النمط الأخضر</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h3>النسخ الاحتياطي</h3>
                        <button id="backupSystem" class="btn-primary">إنشاء نسخة احتياطية</button>
                        <button id="restoreSystem" class="btn-primary">استعادة نسخة احتياطية</button>
                        <button id="downloadProjectFiles" class="btn-primary">تنزيل ملفات المشروع</button>
                    </div>
                    <div class="settings-footer">
                        <p>جميع الحقوق محفوظة © 2024 Code_01</p>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script type="module" src="script.js"></script>
<script type="module">
  import { app } from './firebase-config.js';
</script>
</body>
</html>